---
import BaseLayout from "../../layouts/BaseLayout.astro";

const posts = await Astro.glob("./*.md");
const sortedPosts = posts.sort((a, b) => {
  const aDate = a.frontmatter.pubDate ? new Date(a.frontmatter.pubDate) : new Date(0);
  const bDate = b.frontmatter.pubDate ? new Date(b.frontmatter.pubDate) : new Date(0);
  return bDate - aDate;
});
---

<BaseLayout title="Notes">
  <section class="hero">
    <p class="eyebrow">Personal Blog</p>
    <h1>Notes</h1>
    <p class="lead">Short-form thoughts, learning notes, and experiments.</p>
  </section>

  <section class="card">
    <h2>Latest Posts</h2>
    <ul>
      {sortedPosts.map((post) => (
        <li>
          <a href={post.url}>{post.frontmatter.title}</a>
          {post.frontmatter.pubDate && (
            <span class="muted">
              {" "}
              -{" "}
              {new Date(post.frontmatter.pubDate).toLocaleDateString("en-US", {
                month: "short",
                day: "2-digit",
                year: "numeric"
              })}
            </span>
          )}
        </li>
      ))}
    </ul>
  </section>
</BaseLayout>
